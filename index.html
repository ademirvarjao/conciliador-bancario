<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Conciliador Bancário Pro</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="app-container">
    <header class="app-header">
      <div class="header-brand">
        <svg class="brand-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 10h18"/><path d="M7 15h10"/><path d="M2 6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6Z"/></svg>
        <div>
          <h1>Conciliador Bancário Pro</h1>
          <p class="subtitle">Gestão financeira inteligente e privada</p>
        </div>
      </div>
      <div class="header-actions">
        <button id="load-samples" class="btn btn-outline">Carregar Amostras</button>
        <button id="reset-data" class="btn btn-danger-outline">Limpar Tudo</button>
      </div>
    </header>

    <div class="dashboard-grid">
      <div class="stat-card">
        <span class="stat-label">Total em Entradas</span>
        <span id="stat-credits" class="stat-value text-success">R$ 0,00</span>
      </div>
      <div class="stat-card">
        <span class="stat-label">Total em Saídas</span>
        <span id="stat-debits" class="stat-value text-danger">R$ 0,00</span>
      </div>
      <div class="stat-card">
        <span class="stat-label">Saldo do Período</span>
        <span id="stat-balance" class="stat-value">R$ 0,00</span>
      </div>
      <div class="stat-card">
        <span class="stat-label">Status Conciliação</span>
        <span id="stat-reconciled-pct" class="stat-value">0%</span>
      </div>
    </div>

    <main class="app-content">
      <section class="card section-import">
        <div class="card-header">
          <span class="step-number">1</span>
          <h2>Importação de Arquivos</h2>
        </div>
        <div class="card-body">
          <div class="import-layout">
            <div class="upload-area">
              <label for="file-input" class="upload-zone" id="drop-zone">
                <input id="file-input" type="file" multiple hidden accept=".ofx,.csv,.json" />
                <div class="upload-content">
                  <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" x2="12" y1="3" y2="15"/></svg>
                  <span>Arraste seus extratos (OFX, CSV)</span>
                  <small>Dados processados localmente no seu navegador</small>
                </div>
              </label>
              <div id="import-summary" class="alert alert-info hidden"></div>
            </div>
            <div class="metadata-form">
               <div class="form-row">
                 <div class="form-group">
                   <label>Empresa</label>
                   <input id="company-name" type="text" class="form-control" placeholder="Razão Social" />
                 </div>
                 <div class="form-group">
                   <label>Banco</label>
                   <input id="bank-name" type="text" class="form-control" placeholder="Ex: Itaú, BB..." />
                 </div>
               </div>
               <div class="form-group">
                  <label>Notas de Conferência</label>
                  <textarea id="pdf-notes" rows="3" class="form-control" placeholder="Observações importantes..."></textarea>
               </div>
            </div>
          </div>
          <div class="actions-bar">
            <button id="parse-files" class="btn btn-primary">Processar Arquivos</button>
            <div class="export-group">
              <button id="export-csv" class="btn btn-secondary">Exportar CSV</button>
              <button id="export-json" class="btn btn-secondary">JSON</button>
            </div>
          </div>
        </div>
      </section>

      <div class="main-grid">
        <div class="main-column">
          <section class="card">
            <div class="card-header space-between">
              <div class="flex-center gap-2">
                <span class="step-number">2</span>
                <h2>Transações do Extrato</h2>
              </div>
              <div class="table-filters">
                <input id="search-transactions" type="text" class="form-control form-control-sm" placeholder="Buscar..." />
                <select id="filter-status" class="form-control form-control-sm">
                  <option value="all">Todos</option>
                  <option value="pending">Pendentes</option>
                  <option value="matched">Conciliados</option>
                </select>
              </div>
            </div>
            
            <div id="bulk-actions" class="bulk-toolbar hidden">
              <span id="selected-count">0 itens selecionados</span>
              <div class="bulk-btns">
                <select id="bulk-account-select" class="form-control form-control-sm">
                  <option value="">Aplicar Conta...</option>
                </select>
                <button id="bulk-delete" class="btn btn-sm btn-danger">Excluir</button>
              </div>
            </div>

            <div class="table-container">
              <table id="transactions-table" class="data-table">
                <thead>
                  <tr>
                    <th><input type="checkbox" id="select-all"></th>
                    <th>Data</th>
                    <th>Descrição</th>
                    <th class="text-right">Valor</th>
                    <th>Conta Contábil</th>
                    <th class="text-center">Status</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </section>
        </div>

        <aside class="sidebar-column">
          <section class="card">
            <div class="card-header">
              <h2>Plano de Contas</h2>
            </div>
            <div class="card-body">
              <div class="file-upload-mini">
                <label for="accounts-file">Importar CSV</label>
                <input id="accounts-file" type="file" accept=".csv" />
              </div>
              <div class="input-group mt-2">
                <input id="new-account" type="text" class="form-control" placeholder="Nova conta..." />
                <button id="add-account" class="btn btn-secondary">+</button>
              </div>
              <div id="accounts-list" class="tags-container scrollable"></div>
            </div>
          </section>

          <section class="card mt-4">
            <div class="card-header">
              <h2>Motor de Conciliação</h2>
            </div>
            <div class="card-body">
              <div class="form-group">
                <label>Razão Contábil (CSV)</label>
                <input id="ledger-input" type="file" class="form-control" accept=".csv" />
              </div>
              <div class="form-row mt-2">
                <div class="form-group">
                  <label>Tol. Dias</label>
                  <input id="tolerance-days" type="number" value="2" class="form-control" />
                </div>
                <div class="form-group">
                  <label>Tol. Valor</label>
                  <input id="tolerance-value" type="number" step="0.01" value="0.05" class="form-control" />
                </div>
              </div>
              <button id="run-reconciliation" class="btn btn-success w-full mt-2">Executar Matching</button>
              <div id="reconciliation-summary" class="alert alert-warning mt-2 hidden"></div>
            </div>
          </section>
        </aside>
      </div>
    </main>
  </div>

  <template id="transaction-row-template">
    <tr>
      <td><input type="checkbox" class="row-checkbox"></td>
      <td data-field="date"></td>
      <td data-field="description" class="text-truncate" style="max-width: 250px;"></td>
      <td data-field="amount" class="text-right font-medium"></td>
      <td>
        <select class="account-picker form-control form-control-sm"></select>
      </td>
      <td class="text-center"><span class="status-badge" data-field="status"></span></td>
    </tr>
  </template>

  <script src="app.js"></script>
</body>
</html>
