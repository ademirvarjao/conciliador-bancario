<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Conciliador Banc√°rio v0.6 - Ferramenta open source de concilia√ß√£o banc√°ria autom√°tica, 100% executada no navegador. Privacidade total.">
  <meta name="keywords" content="concilia√ß√£o banc√°ria, contabilidade, OFX, CSV, raz√£o cont√°bil, matching, reconcilia√ß√£o">
  <meta name="author" content="Ademir Varj√£o">
  <meta name="version" content="0.6.0">
  <meta name="theme-color" content="#4f46e5">
  
  <title>Conciliador Banc√°rio v0.6</title>
  
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="app-container">
    <!-- HEADER -->
    <header class="app-header">
      <div class="header-brand">
        <svg class="brand-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 10h18"/>
          <path d="M7 15h10"/>
          <path d="M2 6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6Z"/>
        </svg>
        <div>
          <h1>Conciliador Banc√°rio</h1>
          <p class="subtitle">v0.6 - Layout tradicional e otimizado</p>
        </div>
      </div>
      <div class="header-actions">
        <select id="currency-select" class="form-control form-control-sm" aria-label="Selecionar moeda">
          <option value="BRL">BRL (R$)</option>
          <option value="USD">USD ($)</option>
          <option value="EUR">EUR (‚Ç¨)</option>
        </select>
        <button id="load-samples" class="btn btn-outline">
          üì¶ Amostras
        </button>
        <button id="reset-data" class="btn btn-danger-outline">
          üóëÔ∏è Limpar
        </button>
      </div>
    </header>

    <!-- DASHBOARD -->
    <div class="dashboard">
      <div class="stat-card">
        <span class="stat-label">Total em Entradas</span>
        <span id="stat-credits" class="stat-value text-success">R$ 0,00</span>
      </div>
      <div class="stat-card">
        <span class="stat-label">Total em Sa√≠das</span>
        <span id="stat-debits" class="stat-value text-danger">R$ 0,00</span>
      </div>
      <div class="stat-card">
        <span class="stat-label">Saldo do Per√≠odo</span>
        <span id="stat-balance" class="stat-value">R$ 0,00</span>
      </div>
      <div class="stat-card">
        <span class="stat-label">Status Concilia√ß√£o</span>
        <span id="stat-reconciled-pct" class="stat-value">0%</span>
      </div>
    </div>

    <main class="app-content">
      <!-- SE√á√ÉO 1: IMPORTA√á√ÉO -->
      <section class="section">
        <div class="section-header">
          <h2><span class="step-badge">1</span> Importa√ß√£o de Arquivos</h2>
        </div>
        <div class="section-body">
          <div class="import-grid">
            <div class="upload-wrapper">
              <label for="file-input" class="upload-zone" id="drop-zone">
                <input id="file-input" type="file" multiple hidden accept=".ofx,.csv,.json" />
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                  <polyline points="17 8 12 3 7 8"/>
                  <line x1="12" x2="12" y1="3" y2="15"/>
                </svg>
                <span>Arraste extratos banc√°rios (OFX, CSV, JSON)</span>
                <small>Processamento 100% local ‚Ä¢ M√°x 10MB</small>
              </label>
              <div id="import-summary" class="alert alert-info hidden"></div>
            </div>
            
            <div class="metadata-fields">
              <div class="field-group">
                <label for="company-name">Empresa</label>
                <input id="company-name" type="text" class="form-control" placeholder="Raz√£o Social" />
              </div>
              <div class="field-group">
                <label for="bank-name">Banco</label>
                <input id="bank-name" type="text" class="form-control" placeholder="Ex: Ita√∫, BB..." />
              </div>
              <div class="field-group full-width">
                <label for="pdf-notes">Observa√ß√µes</label>
                <textarea id="pdf-notes" rows="2" class="form-control" placeholder="Anota√ß√µes sobre esta concilia√ß√£o..."></textarea>
              </div>
            </div>
          </div>
          
          <div class="section-actions">
            <button id="parse-files" class="btn btn-primary">
              ‚úÖ Processar Arquivos
            </button>
            <div class="action-group">
              <button id="export-csv" class="btn btn-secondary">
                üíæ CSV
              </button>
              <button id="export-json" class="btn btn-secondary">
                üíæ JSON
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- LAYOUT PRINCIPAL -->
      <div class="main-layout">
        <!-- COLUNA PRINCIPAL: TRANSA√á√ïES -->
        <div class="main-content">
          <section class="section">
            <div class="section-header">
              <h2><span class="step-badge">2</span> Transa√ß√µes do Extrato</h2>
              <div class="header-controls">
                <input 
                  id="search-transactions" 
                  type="text" 
                  class="form-control form-control-sm" 
                  placeholder="üîç Buscar..."
                />
                <select id="filter-status" class="form-control form-control-sm">
                  <option value="all">Todos</option>
                  <option value="pending">Pendentes</option>
                  <option value="matched">Conciliados</option>
                </select>
              </div>
            </div>
            
            <div id="bulk-actions" class="bulk-toolbar hidden">
              <span id="selected-count">0 itens</span>
              <div class="bulk-controls">
                <select id="bulk-account-select" class="form-control form-control-sm">
                  <option value="">Aplicar Conta...</option>
                </select>
                <button id="bulk-delete" class="btn btn-sm btn-danger">
                  üóëÔ∏è Excluir
                </button>
              </div>
            </div>

            <div class="table-wrapper">
              <table id="transactions-table">
                <thead>
                  <tr>
                    <th><input type="checkbox" id="select-all"></th>
                    <th>Data</th>
                    <th>Descri√ß√£o</th>
                    <th class="text-right">Valor</th>
                    <th>Conta Cont√°bil</th>
                    <th class="text-center">Status</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </section>
        </div>

        <!-- SIDEBAR -->
        <aside class="sidebar-content">
          <section class="section compact">
            <div class="section-header">
              <h3>Plano de Contas</h3>
            </div>
            <div class="section-body">
              <div class="file-input-wrapper">
                <label>Importar CSV</label>
                <input id="accounts-file" type="file" accept=".csv" class="form-control form-control-sm" />
              </div>
              <div class="input-group">
                <input id="new-account" type="text" class="form-control" placeholder="Nova conta..." />
                <button id="add-account" class="btn btn-secondary">
                  +
                </button>
              </div>
              <div id="accounts-list" class="tags-list"></div>
            </div>
          </section>

          <section class="section compact">
            <div class="section-header">
              <h3>Motor de Concilia√ß√£o</h3>
            </div>
            <div class="section-body">
              <div class="field-group">
                <label for="ledger-input">Raz√£o Cont√°bil (CSV)</label>
                <input id="ledger-input" type="file" class="form-control form-control-sm" accept=".csv" />
                <small class="field-hint">Formato: Data, Descri√ß√£o, Valor, Conta</small>
              </div>
              <div class="tolerance-grid">
                <div class="field-group">
                  <label for="tolerance-days">Toler√¢ncia (Dias)</label>
                  <input id="tolerance-days" type="number" value="2" min="0" max="30" class="form-control" />
                </div>
                <div class="field-group">
                  <label for="tolerance-value">Toler√¢ncia (R$)</label>
                  <input id="tolerance-value" type="number" step="0.01" value="0.05" min="0" class="form-control" />
                </div>
              </div>
              <button id="run-reconciliation" class="btn btn-success w-full" disabled>
                üéØ Executar Matching
              </button>
              <div id="reconciliation-summary" class="alert alert-info hidden"></div>
            </div>
          </section>
        </aside>
      </div>
    </main>
    
    <footer class="app-footer">
      <p><strong>Conciliador Banc√°rio v0.6</strong> - Open Source | MIT License</p>
      <p>Desenvolvido por <a href="https://github.com/ademirvarjao" target="_blank">Ademir Varj√£o</a></p>
      <p>üîí 100% Local | üõ°Ô∏è Seus dados nunca saem do navegador</p>
    </footer>
  </div>

  <!-- TEMPLATE: Linha de Transa√ß√£o -->
  <template id="transaction-row-template">
    <tr>
      <td><input type="checkbox" class="row-checkbox"></td>
      <td data-field="date"></td>
      <td data-field="description" class="text-truncate"></td>
      <td data-field="amount" class="text-right font-medium"></td>
      <td><select class="account-picker form-control form-control-sm"></select></td>
      <td class="text-center"><span class="status-badge" data-field="status"></span></td>
    </tr>
  </template>

  <script src="app.js"></script>
</body>
</html>
